## 一	目的

模拟线上环境，降低上线的出错率，方便开发人员进行开发和联调。



## 二	访问地址

Jupiter 后台  http://123.206.95.76:7081/admin/

Falcon 后台  http://123.206.95.76:7081/data/

倍联 客户端 http://123.206.95.76:7083

adx 系统 http://123.206.95.76:7084

ligo系统 http://123.206.95.76:7085/static#/

sdk-front http://123.206.95.76:7086/

## 三	发布步骤 (以发布jupiter代码为例)

场景：小王在本地分支rl_jsonHe_20190710 上开发完成了功能，现在想把自己的代码发布到测试环境供别人联调。

步骤：

1. 把本地分支  rl_jsonHe_201907010推动到远端origin。

2. 登陆jenkins http://123.206.95.76:8081 账号admin  密码 admin ![](/Users/bayescom/Library/Application Support/typora-user-images/image-20190712111912056.png)

3. 点击jenkins 中的jupiter项目 ![image-20190712112006194](/Users/bayescom/Library/Application Support/typora-user-images/image-20190712112006194.png)

4.	点击build with parameters 在此处选择要构建的分支rl_jsonHe_20190710点击开始构建即可。稍后便可以在 http://123.206.95.76:7081/dspapi/v1 中看到分支的功能供别的开发人员进行联调。![image-20190712112048102](/Users/bayescom/Library/Application Support/typora-user-images/image-20190712112048102.png)

   

   
   
   

## 四	设计思路

**在dev002上一共使用了5个docker 容器分别是**

1.registry.cn-hangzhou.aliyuncs.com/bayes/lamp （jupiter 和 falcon项目的环境）

 环境 nginx+mysql+php

Jupiter 代码存放目录 /www/wwwroot/Jupiter

Falcon 代码存放目录 /www/wwwroot/Falcon

nginx，mysql，php 的安装目录 /www/service



2.registry.cn-hangzhou.aliyuncs.com/bayes/ember （ember项目的环境）

环境 node 6.10.2

ember 代码存放目录 /www/web



3.registry.cn-hangzhou.aliyuncs.com/bayes/jenkins （jenkins环境）

环境 jdk 1.8.0

4.registry.cn-hangzhou.aliyuncs.com/bayes/ligo （ligo项目）

nvm

node 12.5.0

5.registry.cn-hangzhou.aliyuncs.com/bayes/adx （adx项目）

nvm

node 12.5.0

**容器之间的通信使用 docker --link**



**容器初始化命令**

docker run -idt -p 7081:81 -p 7082:82 -p 7006:3306 -p 7008:8888  --name=lamp registry.cn-hangzhou.aliyuncs.com/bayes/lamp

docker run -idt -p 7083:4200 —name=ember registry.cn-hangzhou.aliyuncs.com/bayes/ember

docker run -idt -p 7084:8360 —name=adx registry.cn-hangzhou.aliyuncs.com/bayes/adx

docker run -idt -p 7085:8360 —name=ligo registry.cn-hangzhou.aliyuncs.com/bayes/ligo

docker run -idt -p 8081:8081 --name=jenkins --link lamp:clamp --link ember:cember —link adx:cadx —lin ligo:cligo registry.cn-hangzhou.aliyuncs.com/bayes/jenkins



jenkins 通过ember实例内的sshd 发送代码到ember，通过lamp实例内的sshd 发送代码到lamp













